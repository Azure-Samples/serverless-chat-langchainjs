# Session 02 - Init `CosmosDB LC Vector Store`

In this session, we will start creating the use of `CosmosDB LC vector store` to store the vectors generated by Azure OpenAI.

## Step 01 - Install packages

Azure Cosmos DB for MongoDB vCore helps developers with a fully managed and scalable database, being compatible with MongoDB. In this part of the tutorial, we will be using Azure Cosmos DB for MongoDB vCore to store vector search resources.

> know more: **[Use vector search on embeddings in Azure Cosmos DB for MongoDB vCore](https://learn.microsoft.com/en-us/azure/cosmos-db/mongodb/vcore/vector-search)**
> know more: **[Understand embeddings in Azure OpenAI Service](https://learn.microsoft.com/en-us/azure/ai-services/openai/concepts/understand-embeddings)**

Well, to start, let's install the following packages:

```bash
npm install mongodb @langchain/community @langchain/core
```

However, as `third-party` providers, it is necessary to make some changes to the `package.json` file. Why?

Imagine that you are building a LEGO model. LangChain is like the complete LEGO set that allows you to build something cool, like a robot. Within this set, there are smaller packages (specific LEGO piece boxes) that you can use to add special features to your robot. For example, a small package can give your robot the ability to light up, similar to how `@langchain/azure-openai` adds Azure OpenAI model features to LangChain. Another package may include a variety of pieces contributed by LEGO fans, just as `@langchain/community` has several community-contributed integrations.

All these special packages, including the main LangChain set, need a foundation to build on, which is like having a base plate in LEGO terms. This base is `@langchain/core`. It's the fundamental piece that everything else connects to, ensuring your robot stands firm and works well.

When building your LEGO robot, it's crucial that all the pieces fit perfectly on the base. In the world of LangChain, this means that all special packages (like the ones that make your robot light up) must be compatible with the `@langchain/core` base plate. To ensure this, you need to use a trick in the instruction manual (the `package.json` file of your project). This trick is to add a special note, called _resolutions_ or _overrides_, telling everyone to use the same version of the base (`@langchain/core`) to ensure everything fits perfectly without issues.

So by setting up your project, you're ensuring that all parts of your LangChain LEGO set work harmoniously, specifying the correct version of the base for everything to build on top of.

Excellent analogy, isn't it?

Now, let's do the following, add the following code to the `package.json` file:

- `package.json`

```json
(...)
  "resolutions": {
    "@langchain/core": "^0.1.44"
  },
  "overrides": {
    "@langchain/core": "^0.1.44"
  },
(...)
```

> you can check how it looks in the project's `package.json` file **[here](https://github.com/Azure-Samples/serverless-ai-langchainjs/blob/main/packages/api/package.json)**. And, to learn more about Installing integration packages, access **[here](https://js.langchain.com/docs/get_started/installation#installing-integration-packages)**.

## Step 02 - Create a CosmosDB for MongoDB vCore cluster using Azure Portal

Now we will need to create an Azure Cosmos DB for MongoDB vCore cluster. To do this, you can follow the step-by-step tutorial **[Quickstart: Create an Azure Cosmos DB for MongoDB vCore cluster by using the Azure portal](https://learn.microsoft.com/en-us/azure/cosmos-db/mongodb/vcore/quickstart-portal)**

After creating the cluster, we will need you to save the following information:

- `cluster name`
- `admin username`
- `password`
- `connection string`

When you create the cluster, you can find this information in the `Connection String` tab of your cluster.

After collecting this information, we'll include it in the project's `.env` file:

- `.env`

```env
AZURE_OPENAI_API_ENDPOINT="<your_endpoint>"
AZURE_OPENAI_API_EMBEDDINGS_DEPLOYMENT_NAME="<your_deployment_name>"
AZURE_OPENAI_API_KEY="<your_key>"

AZURE_COSMOSDB_CONNECTION_STRING="<your_connection_string>"
```

Where `<user>:<password>` is, you should replace it with: `<your-admin-username>:<your-password>`, which you created in the previous step.

Perfect! We already have our CosmosDB configured and ready to be used. Now let's move on to the next step!

â–¶ **[Next Step: Generate completion using a chain](./03-session.md)**
